<ng-template #tooltipContent>{{lastSelectValue}}</ng-template>
<div [id]="servoyApi.getMarkupId()" class="bts-combobox-container" ngbDropdown #comboboxDropdown="ngbDropdown" (openChange)="openChange($event)"  [container]="appendToBody?'body':null" #element> 
  <button class="bts-combobox form-control dropdown-toggle bts-dropdown" ngbDropdownToggle
    [ngbTooltip]="tooltipContent"
    triggers="manual"
    #tooltip="ngbTooltip"
    [container]="appendToBody?'body':null"
    [sabloTabseq]="tabSeq"
    [svyTooltip]="toolTipText"
    [svyStartEdit]="'dataProviderID'"
    [hostComponent]="this"
    [svyFormat]="format"
    [disabled]="readOnly || !enabled"
    [id]="servoyApi.getMarkupId() + '_btn'"
    #input>
		<span *ngIf="showAsHtml()" class="bts-dropdown-text" [innerHtml]="formattedValue ? (formattedValue | htmlFilter | trustAsHtml:isTrustedHTML()) : formattedValue"></span>
		<span *ngIf="!showAsHtml()" class="bts-dropdown-text">{{formattedValue}}</span>
  </button>
  <div 
    ngbDropdownMenu 
    [attr.aria-labelledby]="servoyApi.getMarkupId() + '_btn'" 
    [ngStyle]="{ 'width.px': getDropDownWidth() }"
    (keydown)="handleKeyDown($event)">
    <ng-container *ngIf="openState">
      <button 
        *ngFor="let value of valuelistID; let idx = index" 
        ngbDropdownItem 
        class="svy-ngbdropdownitem" 
        [ngClass]="{active:valueComparator(value)}" 
        (click)="updateValue(value.realValue)">
          <!-- do not break the next line -->
          <span *ngIf="showAsHtml()" [innerHtml]="value.displayValue | formatFilter:format | htmlFilter | trustAsHtml:isTrustedHTML() | emptyValue"></span>
          <span *ngIf="!showAsHtml()">{{getRemainingValueBefore(value.displayValue | formatFilter:format | emptyValue)}}<strong>{{getStrongValue(value.displayValue | formatFilter:format | emptyValue)}}</strong>{{getRemainingValueAfter(value.displayValue | formatFilter:format | emptyValue)}}</span>
      </button>
    </ng-container>
  </div>
</div> 